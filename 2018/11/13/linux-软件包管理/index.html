<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>软件包管理 | LiHongFei.blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="管理程序包的方式：使用包管理器：rpm使用前端工具：yum, dnf程序包管理器：功能：将编译好的应用程序的各组成文件打包一个或几个程序包文件，从而方便快捷地实现程序包的安装、卸载、查询、升级和校验等管理操作包之间：可能存在依赖关系，甚至循环依赖获取程序包的途径：">
<meta name="keywords" content="rpm，yum">
<meta property="og:type" content="article">
<meta property="og:title" content="软件包管理">
<meta property="og:url" content="http://yoursite.com/2018/11/13/linux-软件包管理/index.html">
<meta property="og:site_name" content="LiHongFei.blog">
<meta property="og:description" content="管理程序包的方式：使用包管理器：rpm使用前端工具：yum, dnf程序包管理器：功能：将编译好的应用程序的各组成文件打包一个或几个程序包文件，从而方便快捷地实现程序包的安装、卸载、查询、升级和校验等管理操作包之间：可能存在依赖关系，甚至循环依赖获取程序包的途径：">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-10-30T07:42:12.110Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="软件包管理">
<meta name="twitter:description" content="管理程序包的方式：使用包管理器：rpm使用前端工具：yum, dnf程序包管理器：功能：将编译好的应用程序的各组成文件打包一个或几个程序包文件，从而方便快捷地实现程序包的安装、卸载、查询、升级和校验等管理操作包之间：可能存在依赖关系，甚至循环依赖获取程序包的途径：">
  
    <link rel="alternate" href="/atom.xml" title="LiHongFei.blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">LiHongFei.blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-linux-软件包管理" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/linux-软件包管理/" class="article-date">
  <time datetime="2018-11-13T02:51:52.505Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/软件包/">软件包</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      软件包管理
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="管理程序包的方式："><a href="#管理程序包的方式：" class="headerlink" title="管理程序包的方式："></a>管理程序包的方式：</h2><p>使用包管理器：rpm<br>使用前端工具：yum, dnf<br>程序包管理器：<br>功能：将编译好的应用程序的各组成文件打包一个或几个程序包文件，从而方便快捷地实现程序包的安装、卸载、查询、升级和校验等管理操作<br>包之间：可能存在依赖关系，甚至循环依赖<br>获取程序包的途径：<br><a id="more"></a><br>(1) 系统发版的光盘或官方的服务器<br>CentOS镜像：<br><a href="https://www.centos.org/download/" target="_blank" rel="noopener">https://www.centos.org/download/</a><br><a href="http://mirrors.aliyun.com" target="_blank" rel="noopener">http://mirrors.aliyun.com</a><br><a href="http://mirrors.sohu.com" target="_blank" rel="noopener">http://mirrors.sohu.com</a><br><a href="http://mirrors.163.com" target="_blank" rel="noopener">http://mirrors.163.com</a>  </p>
<h2 id="救援模式"><a href="#救援模式" class="headerlink" title="救援模式"></a>救援模式</h2><p>1、重启系统，在进系统的时候按<code>esc</code>键,生产中不是按<code>esc</code><br>2、选择光盘<code>CD-ROM</code><br>3、选择<code>Troubleshooting</code><br>4、选择<code>Rescue a Centos system</code><br>进入到救援模式之后所在的根不是在原来所在的根，centos7 应该是在<code>/mnt/sysimage/</code>目录下</p>
<h2 id="rpm包管理"><a href="#rpm包管理" class="headerlink" title="rpm包管理"></a>rpm包管理</h2><p>CentOS系统上使用rpm命令管理程序包：<br>安装、卸载、升级、查询、校验、数据库维护<br>安装包数据库：/var/lib/rpm   程序包名称及版本，依赖关系，功能说明，包安装后生成的各文件路径及校验码信息，里面存放的都是通用信息<br>rpm {-i|–install} [install-options] PACKAGE_FILE…</p>
<blockquote>
<p>-i 安装的意思，相当于install<br>-v 显示详细过程<br>=h 以#显示程序包的执行过程</p>
</blockquote>
<h3 id="安装程序包"><a href="#安装程序包" class="headerlink" title="安装程序包"></a>安装程序包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -ivh /run/media/root/CentOS\ 7\ x86_64/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm   #组合起来安装</span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>
<h3 id="验证安装包有没有安装成功-q"><a href="#验证安装包有没有安装成功-q" class="headerlink" title="验证安装包有没有安装成功   -q"></a>验证安装包有没有安装成功   <code>-q</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -q vsftpd  #-q可以验证安装包，如果显示出来版本就表示安装成功。</span></span><br><span class="line">vsftpd-3.0.2-22.el7.x86_64</span><br></pre></td></tr></table></figure>
<h3 id="卸载安装包-e"><a href="#卸载安装包-e" class="headerlink" title="卸载安装包 -e"></a>卸载安装包 <code>-e</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -e vsftpd   #-e直接卸载</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#rpm -q vsftpd   #确定包还有没有</span></span><br><span class="line">package vsftpd is not installed</span><br></pre></td></tr></table></figure>
<p><strong>安装和卸载都依赖<code>rpm</code>的数据库 <code>/var/lib/rpm</code>  如果这个数据库丢失的，就不能安装和卸载安装包，已经安装过的也搜索不到了。</strong></p>
<h3 id="rpm-测试安装-–test"><a href="#rpm-测试安装-–test" class="headerlink" title="rpm 测试安装 –test"></a>rpm 测试安装 –test</h3><p>只是测试安装包能不能安装，并不会真正的去安装它<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -ivh --test /run/media/root/CentOS\ 7\ x86_64/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm </span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]   #虽然读条%100 但是并没有安装</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#rpm -q vsftpd    #验证刚刚是不是安装了</span></span><br><span class="line">package vsftpd is not installed</span><br></pre></td></tr></table></figure></p>
<h3 id="rpm-忽略依赖包-–-nodeps"><a href="#rpm-忽略依赖包-–-nodeps" class="headerlink" title="rpm 忽略依赖包 – nodeps"></a>rpm 忽略依赖包 – nodeps</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -ivh --nodeps /run/media/root/CentOS\ 7\     x86_64/Packages/vsftpd-3.0.2-22.el7.x86_64.rpm      #如果一个安装包有依赖关系，可以 --nodeps忽略，但是安装的包因为没有依赖的安装包，可能会不能使用</span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:vsftpd-3.0.2-22.el7              <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>
<h3 id="rpm-–replacepkgs（覆盖）-replacefiles"><a href="#rpm-–replacepkgs（覆盖）-replacefiles" class="headerlink" title="rpm –replacepkgs（覆盖）| replacefiles"></a>rpm –replacepkgs（覆盖）| replacefiles</h3><p>如果我们把已经安装过的程序包文件删除了（不是卸载安装包），这个程序就不能使用了，想要重新使用这个程序，我们就要重新安装，但是我们在重新安装的时候会发现提示安装包已经安装过，因为我们只是把文件删除了，但是在rpm的数据库里还是有这个程序的信息。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rm -f /bin/tree    #删除tree程序</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#rpm -ivh /run/media/root/CentOS\ 7\ x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">        package tree-1.6.0-10.el7.x86_64 is already installed        <span class="comment">## 提示程序已经安装了</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#rpm -ivh /run/media/root/CentOS\ 7\ x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm --replacepkgs    #--replacepkgs  覆盖安装</span></span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:tree-1.6.0-10.el7                <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure></p>
<p><code>replacefiles</code> 和<code>replacepkgs</code>类似  它只覆盖指定的某个文件</p>
<h3 id="其他选项"><a href="#其他选项" class="headerlink" title="其他选项"></a>其他选项</h3><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>–nosignature:</td>
<td>不检查来源合法性</td>
</tr>
<tr>
<td>–nodigest：</td>
<td>不检查包完整性</td>
</tr>
<tr>
<td>–noscripts：</td>
<td>不执行程序包脚本</td>
</tr>
</tbody>
</table>
<h3 id="rpm-包查询-q"><a href="#rpm-包查询-q" class="headerlink" title="rpm 包查询 -q"></a>rpm 包查询 -q</h3><p><code>rpm</code>查询安装包必须写完整的包名，如果有错误就查询不到<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -q libboost_date_time-mt.so.1.53.0</span></span><br><span class="line">package libboost_date_time-mt.so.1.53.0 is not installed     <span class="comment">#查询到安装包并且显示包未安装</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#rpm -qa | grep "^tree"    #-qa是查询所有的包， 想要查某一个可以用grep来筛选</span></span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br></pre></td></tr></table></figure></p>
<p><strong><code>-ql</code></strong>查询包里的文件列表<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -ql tree      #`l`表示查看程序包里的文件列表 ，需要配合`q`查询,只能查看安装好的包，想要查看未安装包里的内容用-qpl加文件的完整路径。</span></span><br><span class="line">/usr/bin/tree</span><br><span class="line">/usr/share/doc/tree-1.6.0</span><br><span class="line">/usr/share/doc/tree-1.6.0/LICENSE</span><br><span class="line">/usr/share/doc/tree-1.6.0/README</span><br><span class="line">/usr/share/man/man1/tree.1.gz</span><br></pre></td></tr></table></figure></p>
<p><strong><code>qc</code></strong>只查看某个包里的配置文件 <strong><code>qd</code></strong>查看文档文件 <code>qi</code>查看安装包的信息<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#rpm -qc bash   #c相当于conf </span></span><br><span class="line">/etc/skel/.bash_logout</span><br><span class="line">/etc/skel/.bash_profile</span><br><span class="line">/etc/skel/.bashrc</span><br></pre></td></tr></table></figure></p>
<p>##3 包卸载：<br>rpm {-e|–erase} [–allmatches] [–nodeps] [–noscripts] [–notriggers] [–test] PACKAGE_NAME<br>–nodeps 忽略依赖性<br>–noscripts：不执行脚本<br>–allmatches  所有匹配</p>
<h3 id="包校验"><a href="#包校验" class="headerlink" title="包校验"></a>包校验</h3><p>V<br>S file Size differs （文件大小）<br>M Mode differs (includes permissions and file type) 模式权限<br>5 digest (formerly MD5 sum) differs<br>D Device major/minor number mismatch 数量<br>L readLink(2) path mismatch<br>U User ownership differs 用户<br>G Group ownership differs<br>T mTimediffers<br>P capabilities differ</p>
<h3 id="检查包的完整性和签名-K"><a href="#检查包的完整性和签名-K" class="headerlink" title="检查包的完整性和签名 (-K)"></a>检查包的完整性和签名 (-K)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 data]<span class="comment">#rpm -K tree-1.6.0-10.el7.x86_64.rpm </span></span><br><span class="line">tree-1.6.0-10.el7.x86_64.rpm: rsa sha1 (md5) pgp md5 OK    <span class="comment">#md5 OK 证明这个包没有被篡改过</span></span><br><span class="line">[root@centos7 data]<span class="comment">#rpm --import /run/media/root/CentOS\ 7\ x86_64/RPM-GPG-KEY-CentOS-7  #导入秘钥</span></span><br></pre></td></tr></table></figure>
<h3 id="rpm数据库"><a href="#rpm数据库" class="headerlink" title="rpm数据库"></a>rpm数据库</h3><p>总结一句话<strong>不能删数据库，删了就准备跑路吧</strong></p>
<h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><p>YUM: YellowdogUpdate Modifier，rpm的前端程序，可解决软件包相关依赖性，可在多个库之间定位软件包，up2date的替代工具<br>yum repository: yum repo，存储了众多rpm包，以及包的相关的元数据文件（放置于特定目录repodata下）</p>
<p><strong>文件服务器：</strong></p>
<blockquote>
<p>http://<br>https://<br>ftp://<br>file://<br>yum install package1 [package2] […]<br>yum reinstall package1 [package2] […] (重新安装)<br>搜索：yum search string1 [string2] […]<br>日志：/var/log/yum.log<br>包组管理的相关命令：<br>yum groupinstall group1 [group2] […]<br>yum grouplist [hidden] [groupwildcard] […]<br>yum groupremove group1 [group2] […]<br>显示程序包：<br>yum list<br>yum list [all</p>
</blockquote>
<h3 id="系统光盘yum仓库"><a href="#系统光盘yum仓库" class="headerlink" title="系统光盘yum仓库"></a>系统光盘yum仓库</h3><p>为当前系统指定一个yum仓库的路径，可以把当前光盘指定为仓库。<br>安装程序包：<br><strong>/etc/yum.repos.d/*.repo</strong> 在这个目录里建立一个以.repo为后缀的文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#ls /run/media/root/CentOS\ 7\ x86_64/      #repodata在哪个目录，路径即为光盘的仓库路径</span></span><br><span class="line">CentOS_BuildTag  EULA  images    LiveOS   repodata              RPM-GPG-KEY-CentOS-Testing-7</span><br><span class="line">EFI              GPL   isolinux  Packages  RPM-GPG-KEY-CentOS-7  TRANS.TBL</span><br><span class="line">[root@centos7 ~]<span class="comment">#cd /etc/yum.repos.d/      #进入yum配置目录</span></span><br><span class="line">[root@centos7 yum.repos.d]<span class="comment">#vim base.repo   #创建一个.repo后缀的文件</span></span><br><span class="line">[bash]    <span class="comment">#仓库名字</span></span><br><span class="line">baseurl=file:///run/media/root/CentOS\ 7\ x86_64/   <span class="comment">#指定存放repodata 的路径</span></span><br><span class="line">gpgcheck=0     <span class="comment">#不校验安装包的来源（key）</span></span><br><span class="line">gpgkey=file:///run/media/root/CentOS\ 7\ x86_64/RPM-GPG-KEY-CentOS-7    <span class="comment">#也可以在安装包的时候导入key ，有这条命令上面命令就不用写了。</span></span><br><span class="line">[root@centos7 yum.repos.d]<span class="comment">#yum repolist      #安装好之后列出仓库的列表</span></span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">repo id                                                repo name                                           status</span><br><span class="line">base                                                   yum                                                 9,911</span><br><span class="line">repolist: 9,911</span><br></pre></td></tr></table></figure></p>
<p>也可以指定文件，文件里写yum源的路径</p>
<h3 id="yum卸载安装包"><a href="#yum卸载安装包" class="headerlink" title="yum卸载安装包"></a>yum卸载安装包</h3><p>yum卸载和rpm卸载一样，只会卸载单独的一个安装包，依赖关系的不会卸载。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#yum remove tree   #卸载后面跟remove</span></span><br></pre></td></tr></table></figure></p>
<h2 id="小例子"><a href="#小例子" class="headerlink" title="小例子"></a>小例子</h2><p>用脚本实现一个功能，判断有没有yum数据库，如果没有就创建，判断httpd有没有安装，没有的话自动安装。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">12 cat /etc/yum.repos.d/bash.repo &amp;&gt; /dev/null                              <span class="comment">#判断有没有这个文件夹</span></span><br><span class="line">13 <span class="built_in">echo</span> $? &gt;&gt; /dev/null                                                     </span><br><span class="line">14 [ $? -eq 0 ] || cat &gt; /etc/yum.repos.d/bash.repo  &lt;&lt;EDF                   <span class="comment">#如果没有bash.repo文件夹就创建                                        </span></span><br><span class="line">15 [bash]</span><br><span class="line">16 baseurl=file:///run/media/root/CentOS\ 7\ x86_64/</span><br><span class="line">17 gpgkey=file:///run/media/root/CentOS\ 7\ x86_64/RPM-GPG-KEY-CentOS-7     </span><br><span class="line">18 EDF</span><br><span class="line">19 rpm -q httpd &amp;&gt; /dev/null || yum install httpd                            <span class="comment">#判断httpd有没有安装</span></span><br></pre></td></tr></table></figure></p>
<h3 id="yum清除缓存"><a href="#yum清除缓存" class="headerlink" title="yum清除缓存"></a>yum清除缓存</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 data]<span class="comment">#yum clean all             #清空所有yum缓存</span></span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">Repository <span class="string">'bash'</span> is missing name <span class="keyword">in</span> configuration, using id</span><br><span class="line">Cleaning repos: bash</span><br><span class="line">Cleaning up everything</span><br><span class="line">Maybe you want: rm -rf /var/cache/yum, to also free up space taken by orphaned data from disabled or removed repos</span><br><span class="line"></span><br><span class="line">[root@centos7 data]<span class="comment">#ls /var/cache/yum           #查看缓存路径</span></span><br></pre></td></tr></table></figure>
<h3 id="yum源"><a href="#yum源" class="headerlink" title="yum源"></a>yum源</h3><p><strong>可用变量</strong><br>$releasever: 当前OS的发行版的主版本号<br>$arch: 平台，i386,i486,i586,x86_64等<br>$basearch：基础平台；i386, x86_64<br>$YUM0-$YUM9:自定义变量<br>一个仓库可以存放多个源地址，<br>[阿里云]<a href="https://mirrors.aliyun.com/centos/7/os/x86_64/" target="_blank" rel="noopener">https://mirrors.aliyun.com/centos/7/os/x86_64/</a></p>
<p>也可以建立一个<code>epel</code>源为“红帽系”的操作系统提供额外的软件包，适用于RHEL、CentOS等，里面有1万多个软件，<code>epel</code>源制作的方式和base仓库一样<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[epel]</span><br><span class="line">baseurl=https://mirrors.aliyun.com/epel/<span class="variable">$releasever</span>/<span class="variable">$releasever</span>/</span><br><span class="line">gpgkey=file:///run/media/root/CentOS\ 7\ x86_64/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure></p>
<p>[阿里云epel]<a href="https://mirrors.aliyun.com/epel/7/x86_64/" target="_blank" rel="noopener">https://mirrors.aliyun.com/epel/7/x86_64/</a><br>可以把对应的版本内核写成变量就会有通用性</p>
<p>阿里巴巴开源软件<br><a href="https://opsx.alibaba.com/" target="_blank" rel="noopener">https://opsx.alibaba.com/</a></p>
<h2 id="创建自己的yum库"><a href="#创建自己的yum库" class="headerlink" title="创建自己的yum库"></a>创建自己的yum库</h2><p>我们可以自己建立自己的yum仓库，自己把安装包放进去<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 a.repo]<span class="comment">#mkdir a.repo    #建立一个文件夹作为自己yum库</span></span><br><span class="line">[root@centos7 a.repo]<span class="comment">#createrepo /data/a.repo/  #repodata作为软件的仓库必须安装，安装到刚刚建立的目录</span></span><br><span class="line">[root@centos7 a.repo]<span class="comment">#vim /etc/yum.repos.d/bash.repo  #修改配置文件把yum路径指向刚刚我们建立的文件夹即可</span></span><br><span class="line">[bash]                                               </span><br><span class="line">3 <span class="comment">#baseurl=file:///data/a.repo/</span></span><br></pre></td></tr></table></figure></p>
<h2 id="搭建网络的yum源"><a href="#搭建网络的yum源" class="headerlink" title="搭建网络的yum源"></a>搭建网络的yum源</h2><p>1、系统必须要搭建http服务<br>2、把rpm包，源数据放到http的共享目录里<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 html]<span class="comment">#yum install httpd           #安装httpd服务</span></span><br><span class="line">[root@centos7 html]<span class="comment">#systemctl start httpd       #开启后台执行的服务 在网页输入服务器地址就可以进入  </span></span><br><span class="line">[root@centos7 html]<span class="comment">#echo &lt;h1&gt; hello word &gt; index.html  #建立一个文件夹，网页上就会显示文件里写的内容,h1为大标题</span></span><br><span class="line">[root@centos7 html]<span class="comment">#mkdir -p centos/&#123;6,7&#125;/os/x86_64/   #建立文件夹，为网页的路径</span></span><br><span class="line">[root@centos7 html]<span class="comment">#mount /dev/sr0 /var/www/html/centos/7/os/x86_64/  #再把光盘的挂载到系统对应的路径</span></span><br></pre></td></tr></table></figure></p>
<h2 id="编译安装httpd"><a href="#编译安装httpd" class="headerlink" title="编译安装httpd"></a>编译安装httpd</h2><p>C语言源代码编译安装三步骤：<br>1、./configure<br>(1) 通过选项传递参数，指定启用特性、安装路径等；执行时会参考用户的指定以及Makefile.in文件生成Makefile<br>(2) 检查依赖到的外部环境，如依赖的软件包<br>2、make 根据Makefile文件，构建应用程序<br>3、make install 复制文件到相应路径<br>注意：安装前查看INSTALL，README<br>开发工具：<br>autoconf: 生成configure脚本<br>automake：生成Makefile.in<br><strong>./configure安装选项</strong><br>–help 可以查看其它选项<br>–prefix= 指定安装目录<br>–sysconfdir=DIR   指定配置文件存放的路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#yum groupinstall "development tools"      #安装</span></span><br><span class="line">[root@centos7 data]<span class="comment">##mkdir httpd/#mkdir httpd/   #建立一个存放httpd文件的文件夹</span></span><br><span class="line">[root@centos7 httpd]<span class="comment">#tar xf httpd-2.4.25.tar.bz2   #把下载好的tar包解包</span></span><br><span class="line">[root@centos7 httpd]<span class="comment">#cd httpd-2.4.25/     #进入到解压出来的文件里，这里注意，后面的所有操作都要在这个文件夹下来执行  </span></span><br><span class="line">[root@centos7 httpd-2.4.25]<span class="comment">#./configure    #全部按照默认路径安装，中间如果有缺失的依赖包可以单独安装，成功之后会自动生成一个Makefile文件</span></span><br><span class="line">[root@centos7 httpd-2.4.25]<span class="comment">#make           #执行make文件</span></span><br><span class="line">[root@centos7 httpd-2.4.25]<span class="comment">#make install   #会自动把文件移动到安装./configure的时候里默认指定的安装路径</span></span><br><span class="line">[root@centos7 httpd-2.4.25]<span class="comment">#echo 'PATH=/usr/local/apache2/bin:$PATH' &gt;&gt; /etc/profile.d/path.sh     #把生成的httpd文件夹里的bin路径加到PATH变量里</span></span><br><span class="line">[root@centos7 ~]<span class="comment">#apachectl start    #重新启动服务  （systemctl restart httpd）也可以 </span></span><br><span class="line">现在httpd的源码编译就做好了，可以网页登录本机地址就可以进去了</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/13/linux-软件包管理/" data-id="cjof550t10006a4vxmr1xlpdh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rpm，yum/">rpm，yum</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/13/集体照/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          马帮新成员（美女镇楼）
        
      </div>
    </a>
  
  
    <a href="/2018/11/13/linux进程和计划任务/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">linux进程和计划任务</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/M/">M</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/内核/">内核</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/压缩/">压缩</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/文件系统/">文件系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/组/">组</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计划任务/">计划任务</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件包/">软件包</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/M34/">M34</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm，yum/">rpm，yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/启动/">启动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础/">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件/">文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/权限/">权限</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/查找/">查找</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/磁盘/">磁盘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程/">进程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/M34/" style="font-size: 10px;">M34</a> <a href="/tags/rpm，yum/" style="font-size: 10px;">rpm，yum</a> <a href="/tags/启动/" style="font-size: 10px;">启动</a> <a href="/tags/基础/" style="font-size: 10px;">基础</a> <a href="/tags/工具/" style="font-size: 20px;">工具</a> <a href="/tags/文件/" style="font-size: 10px;">文件</a> <a href="/tags/权限/" style="font-size: 10px;">权限</a> <a href="/tags/查找/" style="font-size: 20px;">查找</a> <a href="/tags/磁盘/" style="font-size: 10px;">磁盘</a> <a href="/tags/进程/" style="font-size: 10px;">进程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/13/计算机基础/">计算机基础</a>
          </li>
        
          <li>
            <a href="/2018/11/13/集体照/">马帮新成员（美女镇楼）</a>
          </li>
        
          <li>
            <a href="/2018/11/13/linux-软件包管理/">软件包管理</a>
          </li>
        
          <li>
            <a href="/2018/11/13/linux进程和计划任务/">linux进程和计划任务</a>
          </li>
        
          <li>
            <a href="/2018/11/13/文件管理/">linux文件管理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 linux<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>